{"ast":null,"code":"import _classCallCheck from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{IMAGES_API_Q,VIDEO_API}from\"../../../tools/keys\";import{apiGetRequest}from\"../../../api/api\";import ReactPlayer from\"react-player\";import MuteBtn from\"../../parts/MuteBtn\";import moment from\"moment\";import StarRatings from\"react-star-ratings\";var calcTime=function calcTime(number){var hours=String(number/60).split(\"\")[0];var minutes=number-hours*60;return\"\".concat(hours,\"h \").concat(minutes,\"m\");};var generateGenres=function generateGenres(genres){var arr=genres?genres.map(function(m){return m.name;}):[];var string=\"Genres: \".concat(arr.join(\", \"));return string;};var MoviePageAbout=/*#__PURE__*/function(_Component){_inherits(MoviePageAbout,_Component);function MoviePageAbout(){var _this;_classCallCheck(this,MoviePageAbout);_this=_possibleConstructorReturn(this,_getPrototypeOf(MoviePageAbout).call(this));_this.onReady=function(){_this.setState({show_video:true});};_this.handleVideoEnded=function(){_this.setState({video:false,show_video:false});};_this.handleImgeOnLoad=function(){_this.setState({img_loaded:true});};_this.state={movie:{}};return _this;}_createClass(MoviePageAbout,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.movie_id!==this.props.movie_id){this.setState({show_video:false});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,show_video=_this$state.show_video,muted=_this$state.muted,img_loaded=_this$state.img_loaded;var _this$props=this.props,fade_out=_this$props.fade_out,movie=_this$props.movie,video=_this$props.video;return React.createElement(\"header\",{style:{opacity:fade_out?0:1},className:\"movie__page__header  flex__between\"},React.createElement(\"div\",{className:\"movie__page__about\"},React.createElement(\"h2\",null,movie.title),React.createElement(\"span\",{className:\"flex__start\"},React.createElement(\"h3\",null,moment(movie.release_date,\"YYYY-MM-DD\").format(\"YYYY\")),React.createElement(\"figure\",{className:\"flex__center\"},movie.adult?\"Adult\":\"All\"),React.createElement(\"h3\",null,calcTime(movie.runtime))),React.createElement(\"div\",{className:\"movie__ratings\"},React.createElement(StarRatings,{rating:movie.vote_average,starRatedColor:\"#FDD430\",numberOfStars:10})),React.createElement(\"p\",null,movie.overview),React.createElement(\"p\",{id:\"movie__page__about__genres\"},generateGenres(movie.genres))),React.createElement(\"div\",{className:\"movie__page__bg\"},React.createElement(\"div\",{style:{opacity:show_video?1:0,transition:\"0.5s all\"},className:\"movie__page__trailer\"},video?React.createElement(ReactPlayer,{onError:this.handleVideoEnded,muted:muted,onBufferEnd:this.onReady,className:\"video\",url:\"\".concat(VIDEO_API).concat(video),playing:true,onEnded:this.handleVideoEnded}):\"\",React.createElement(MuteBtn,{muted:muted,mute:function mute(){return _this2.setState({muted:!muted});}})),movie.backdrop_path?React.createElement(\"img\",{style:{opacity:img_loaded?1:0,transition:\"0.7s all\"},onLoad:function onLoad(){return _this2.handleImgeOnLoad();},src:\"\".concat(IMAGES_API_Q,\"/\").concat(movie.backdrop_path),alt:\"\"}):\"\"));}}]);return MoviePageAbout;}(Component);export default MoviePageAbout;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movie-page/parts/MoviePageAbout.jsx"],"names":["React","Component","IMAGES_API_Q","VIDEO_API","apiGetRequest","ReactPlayer","MuteBtn","moment","StarRatings","calcTime","number","hours","String","split","minutes","generateGenres","genres","arr","map","m","name","string","join","MoviePageAbout","onReady","setState","show_video","handleVideoEnded","video","handleImgeOnLoad","img_loaded","state","movie","nextProps","movie_id","props","muted","fade_out","opacity","title","release_date","format","adult","runtime","vote_average","overview","transition","backdrop_path"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { IMAGES_API_Q, VIDEO_API } from \"../../../tools/keys\";\nimport { apiGetRequest } from \"../../../api/api\";\nimport ReactPlayer from \"react-player\";\nimport MuteBtn from \"../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport StarRatings from \"react-star-ratings\";\n\nconst calcTime = (number) => {\n  let hours = String(number / 60).split(\"\")[0];\n  let minutes = number - hours * 60;\n  return `${hours}h ${minutes}m`;\n};\nconst generateGenres = (genres) => {\n  let arr = genres ? genres.map((m) => m.name) : [];\n  let string = `Genres: ${arr.join(\", \")}`;\n  return string;\n};\n\nclass MoviePageAbout extends Component {\n  constructor() {\n    super();\n    this.state = {\n      movie: {},\n    };\n  }\n\ncomponentWillReceiveProps(nextProps){\n if(nextProps.movie_id !== this.props.movie_id){\n   this.setState({\n     show_video:false\n   })\n }\n}\n  onReady = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n\n  handleVideoEnded = () => {\n    this.setState({\n      video: false,\n      show_video: false,\n    });\n  };\n  handleImgeOnLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n  };\n  render() {\n    const { show_video, muted, img_loaded,  } = this.state;\n    const {fade_out, movie, video} = this.props\n    return (\n      <header\n      style ={{\n        opacity:fade_out ? 0 :1\n      }}\n      className=\"movie__page__header  flex__between\">\n        <div className=\"movie__page__about\">\n          <h2>{movie.title}</h2>\n          <span className=\"flex__start\">\n            <h3>{moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")}</h3>\n            <figure className='flex__center'>{movie.adult ? \"Adult\" : \"All\"}</figure>\n            <h3>{calcTime(movie.runtime)}</h3>\n          </span>\n          <div className=\"movie__ratings\">\n            <StarRatings\n              rating={movie.vote_average}\n              starRatedColor=\"#FDD430\"\n              numberOfStars={10}\n            />\n          </div>\n          <p>{movie.overview}</p>\n          <p id='movie__page__about__genres'>{generateGenres(movie.genres)}</p>\n        </div>\n        <div className=\"movie__page__bg\">\n          <div\n            style={{\n              opacity: show_video ? 1 : 0,\n              transition: \"0.5s all\",\n            }}\n            className=\"movie__page__trailer\"\n          >\n            {video ? (\n              <ReactPlayer\n              onError = {this.handleVideoEnded}\n                muted={muted}\n                onBufferEnd={this.onReady}\n                className=\"video\"\n                url={`${VIDEO_API}${video}`}\n                playing\n                onEnded={this.handleVideoEnded}\n              />\n            ) : (\n              \"\"\n            )}\n\n            <MuteBtn\n              muted={muted}\n              mute={() => this.setState({ muted: !muted })}\n            />\n          </div>\n\n          {movie.backdrop_path ? (\n            <img\n              style={{\n                opacity: img_loaded ? 1 : 0,\n                transition: \"0.7s all\",\n              }}\n              onLoad={() => this.handleImgeOnLoad()}\n              src={`${IMAGES_API_Q}/${movie.backdrop_path}`}\n              alt=\"\"\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n      </header>\n    );\n  }\n}\n\nexport default MoviePageAbout;\n"]},"metadata":{},"sourceType":"module"}