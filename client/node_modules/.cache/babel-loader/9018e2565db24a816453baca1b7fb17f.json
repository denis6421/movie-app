{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/movies-app/client/src/components/movie-page/parts/MoviePageAbout.jsx\";\nimport React, { Component } from \"react\";\nimport { IMAGES_API_Q, VIDEO_API } from \"../../../tools/keys\";\nimport { apiGetRequest } from \"../../../api/api\";\nimport ReactPlayer from \"react-player\";\nimport MuteBtn from \"../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport StarRatings from \"react-star-ratings\";\n\nconst calcTime = number => {\n  let hours = String(number / 60).split(\"\")[0];\n  let minutes = number - hours * 60;\n  return \"\".concat(hours, \"h \").concat(minutes, \"m\");\n};\n\nconst generateGenres = genres => {\n  let arr = genres ? genres.map(m => m.name) : [];\n  let string = \"Genres: \".concat(arr.join(\", \"));\n  return string;\n};\n\nclass MoviePageAbout extends Component {\n  constructor() {\n    super();\n\n    this.onReady = () => {\n      this.setState({\n        show_video: true\n      });\n    };\n\n    this.handleVideoEnded = () => {\n      this.setState({\n        video: false,\n        show_video: false\n      });\n    };\n\n    this.handleImgeOnLoad = () => {\n      this.setState({\n        img_loaded: true\n      });\n    };\n\n    this.state = {\n      movie: {}\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.movie_id !== this.props.movie_id) {\n      console.log('wefwwfwefw');\n      this.setState({\n        show_video: false\n      });\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          show_video = _this$state.show_video,\n          muted = _this$state.muted,\n          img_loaded = _this$state.img_loaded;\n    const _this$props = this.props,\n          fade_out = _this$props.fade_out,\n          movie = _this$props.movie,\n          video = _this$props.video;\n    return React.createElement(\"header\", {\n      style: {\n        opacity: fade_out ? 0 : 1\n      },\n      className: \"movie__page__header  flex__between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"movie__page__about\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, movie.title), React.createElement(\"span\", {\n      className: \"flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")), React.createElement(\"figure\", {\n      className: \"flex__center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, movie.adult ? \"Adult\" : \"All\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, calcTime(movie.runtime))), React.createElement(\"div\", {\n      className: \"movie__ratings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(StarRatings, {\n      rating: movie.vote_average,\n      starRatedColor: \"#FDD430\",\n      numberOfStars: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, movie.overview), React.createElement(\"p\", {\n      id: \"movie__page__about__genres\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, generateGenres(movie.genres))), React.createElement(\"div\", {\n      className: \"movie__page__bg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        opacity: show_video ? 1 : 0,\n        transition: \"0.5s all\"\n      },\n      className: \"movie__page__trailer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, video ? React.createElement(ReactPlayer, {\n      onError: this.handleVideoEnded,\n      muted: muted,\n      onBufferEnd: this.onReady,\n      className: \"video\",\n      url: \"\".concat(VIDEO_API).concat(video),\n      playing: true,\n      onEnded: this.handleVideoEnded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }) : \"\", React.createElement(MuteBtn, {\n      muted: muted,\n      mute: () => this.setState({\n        muted: !muted\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), movie.backdrop_path ? React.createElement(\"img\", {\n      style: {\n        opacity: img_loaded ? 1 : 0,\n        transition: \"0.7s all\"\n      },\n      onLoad: () => this.handleImgeOnLoad(),\n      src: \"\".concat(IMAGES_API_Q, \"/\").concat(movie.backdrop_path),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }) : \"\"));\n  }\n\n}\n\nexport default MoviePageAbout;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movie-page/parts/MoviePageAbout.jsx"],"names":["React","Component","IMAGES_API_Q","VIDEO_API","apiGetRequest","ReactPlayer","MuteBtn","moment","StarRatings","calcTime","number","hours","String","split","minutes","generateGenres","genres","arr","map","m","name","string","join","MoviePageAbout","constructor","onReady","setState","show_video","handleVideoEnded","video","handleImgeOnLoad","img_loaded","state","movie","componentWillReceiveProps","nextProps","movie_id","props","console","log","render","muted","fade_out","opacity","title","release_date","format","adult","runtime","vote_average","overview","transition","backdrop_path"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,qBAAxC;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;;AAEA,MAAMC,QAAQ,GAAIC,MAAD,IAAY;AAC3B,MAAIC,KAAK,GAAGC,MAAM,CAACF,MAAM,GAAG,EAAV,CAAN,CAAoBG,KAApB,CAA0B,EAA1B,EAA8B,CAA9B,CAAZ;AACA,MAAIC,OAAO,GAAGJ,MAAM,GAAGC,KAAK,GAAG,EAA/B;AACA,mBAAUA,KAAV,eAAoBG,OAApB;AACD,CAJD;;AAKA,MAAMC,cAAc,GAAIC,MAAD,IAAY;AACjC,MAAIC,GAAG,GAAGD,MAAM,GAAGA,MAAM,CAACE,GAAP,CAAYC,CAAD,IAAOA,CAAC,CAACC,IAApB,CAAH,GAA+B,EAA/C;AACA,MAAIC,MAAM,qBAAcJ,GAAG,CAACK,IAAJ,CAAS,IAAT,CAAd,CAAV;AACA,SAAOD,MAAP;AACD,CAJD;;AAMA,MAAME,cAAN,SAA6BtB,SAA7B,CAAuC;AACrCuB,EAAAA,WAAW,GAAG;AACZ;;AADY,SAedC,OAfc,GAeJ,MAAM;AACd,WAAKC,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KAnBa;;AAAA,SAqBdC,gBArBc,GAqBK,MAAM;AACvB,WAAKF,QAAL,CAAc;AACZG,QAAAA,KAAK,EAAE,KADK;AAEZF,QAAAA,UAAU,EAAE;AAFA,OAAd;AAID,KA1Ba;;AAAA,SA2BdG,gBA3Bc,GA2BK,MAAM;AACvB,WAAKJ,QAAL,CAAc;AACZK,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KA/Ba;;AAEZ,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE;AADI,KAAb;AAGD;;AAEHC,EAAAA,yBAAyB,CAACC,SAAD,EAAW;AACnC,QAAGA,SAAS,CAACC,QAAV,KAAuB,KAAKC,KAAL,CAAWD,QAArC,EAA8C;AAC5CE,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WAAKb,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAC;AADC,OAAd;AAGD;AACD;;AAkBCa,EAAAA,MAAM,GAAG;AAAA,wBACqC,KAAKR,KAD1C;AAAA,UACCL,UADD,eACCA,UADD;AAAA,UACac,KADb,eACaA,KADb;AAAA,UACoBV,UADpB,eACoBA,UADpB;AAAA,wBAE0B,KAAKM,KAF/B;AAAA,UAEAK,QAFA,eAEAA,QAFA;AAAA,UAEUT,KAFV,eAEUA,KAFV;AAAA,UAEiBJ,KAFjB,eAEiBA,KAFjB;AAGP,WACE;AACA,MAAA,KAAK,EAAG;AACNc,QAAAA,OAAO,EAACD,QAAQ,GAAG,CAAH,GAAM;AADhB,OADR;AAIA,MAAA,SAAS,EAAC,oCAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKT,KAAK,CAACW,KAAX,CADF,EAEE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKrC,MAAM,CAAC0B,KAAK,CAACY,YAAP,EAAqB,YAArB,CAAN,CAAyCC,MAAzC,CAAgD,MAAhD,CAAL,CADF,EAEE;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkCb,KAAK,CAACc,KAAN,GAAc,OAAd,GAAwB,KAA1D,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKtC,QAAQ,CAACwB,KAAK,CAACe,OAAP,CAAb,CAHF,CAFF,EAOE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AACE,MAAA,MAAM,EAAEf,KAAK,CAACgB,YADhB;AAEE,MAAA,cAAc,EAAC,SAFjB;AAGE,MAAA,aAAa,EAAE,EAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAPF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIhB,KAAK,CAACiB,QAAV,CAdF,EAeE;AAAG,MAAA,EAAE,EAAC,4BAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoCnC,cAAc,CAACkB,KAAK,CAACjB,MAAP,CAAlD,CAfF,CALF,EAsBE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAE;AACL2B,QAAAA,OAAO,EAAEhB,UAAU,GAAG,CAAH,GAAO,CADrB;AAELwB,QAAAA,UAAU,EAAE;AAFP,OADT;AAKE,MAAA,SAAS,EAAC,sBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGtB,KAAK,GACJ,oBAAC,WAAD;AACA,MAAA,OAAO,EAAI,KAAKD,gBADhB;AAEE,MAAA,KAAK,EAAEa,KAFT;AAGE,MAAA,WAAW,EAAE,KAAKhB,OAHpB;AAIE,MAAA,SAAS,EAAC,OAJZ;AAKE,MAAA,GAAG,YAAKtB,SAAL,SAAiB0B,KAAjB,CALL;AAME,MAAA,OAAO,MANT;AAOE,MAAA,OAAO,EAAE,KAAKD,gBAPhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADI,GAWJ,EAlBJ,EAqBE,oBAAC,OAAD;AACE,MAAA,KAAK,EAAEa,KADT;AAEE,MAAA,IAAI,EAAE,MAAM,KAAKf,QAAL,CAAc;AAAEe,QAAAA,KAAK,EAAE,CAACA;AAAV,OAAd,CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArBF,CADF,EA4BGR,KAAK,CAACmB,aAAN,GACC;AACE,MAAA,KAAK,EAAE;AACLT,QAAAA,OAAO,EAAEZ,UAAU,GAAG,CAAH,GAAO,CADrB;AAELoB,QAAAA,UAAU,EAAE;AAFP,OADT;AAKE,MAAA,MAAM,EAAE,MAAM,KAAKrB,gBAAL,EALhB;AAME,MAAA,GAAG,YAAK5B,YAAL,cAAqB+B,KAAK,CAACmB,aAA3B,CANL;AAOE,MAAA,GAAG,EAAC,EAPN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAWC,EAvCJ,CAtBF,CADF;AAmED;;AAvGoC;;AA0GvC,eAAe7B,cAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { IMAGES_API_Q, VIDEO_API } from \"../../../tools/keys\";\nimport { apiGetRequest } from \"../../../api/api\";\nimport ReactPlayer from \"react-player\";\nimport MuteBtn from \"../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport StarRatings from \"react-star-ratings\";\n\nconst calcTime = (number) => {\n  let hours = String(number / 60).split(\"\")[0];\n  let minutes = number - hours * 60;\n  return `${hours}h ${minutes}m`;\n};\nconst generateGenres = (genres) => {\n  let arr = genres ? genres.map((m) => m.name) : [];\n  let string = `Genres: ${arr.join(\", \")}`;\n  return string;\n};\n\nclass MoviePageAbout extends Component {\n  constructor() {\n    super();\n    this.state = {\n      movie: {},\n    };\n  }\n\ncomponentWillReceiveProps(nextProps){\n if(nextProps.movie_id !== this.props.movie_id){\n   console.log('wefwwfwefw')\n   this.setState({\n     show_video:false\n   })\n }\n}\n  onReady = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n\n  handleVideoEnded = () => {\n    this.setState({\n      video: false,\n      show_video: false,\n    });\n  };\n  handleImgeOnLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n  };\n  render() {\n    const { show_video, muted, img_loaded,  } = this.state;\n    const {fade_out, movie, video} = this.props\n    return (\n      <header\n      style ={{\n        opacity:fade_out ? 0 :1\n      }}\n      className=\"movie__page__header  flex__between\">\n        <div className=\"movie__page__about\">\n          <h2>{movie.title}</h2>\n          <span className=\"flex__start\">\n            <h3>{moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")}</h3>\n            <figure className='flex__center'>{movie.adult ? \"Adult\" : \"All\"}</figure>\n            <h3>{calcTime(movie.runtime)}</h3>\n          </span>\n          <div className=\"movie__ratings\">\n            <StarRatings\n              rating={movie.vote_average}\n              starRatedColor=\"#FDD430\"\n              numberOfStars={10}\n            />\n          </div>\n          <p>{movie.overview}</p>\n          <p id='movie__page__about__genres'>{generateGenres(movie.genres)}</p>\n        </div>\n        <div className=\"movie__page__bg\">\n          <div\n            style={{\n              opacity: show_video ? 1 : 0,\n              transition: \"0.5s all\",\n            }}\n            className=\"movie__page__trailer\"\n          >\n            {video ? (\n              <ReactPlayer\n              onError = {this.handleVideoEnded}\n                muted={muted}\n                onBufferEnd={this.onReady}\n                className=\"video\"\n                url={`${VIDEO_API}${video}`}\n                playing\n                onEnded={this.handleVideoEnded}\n              />\n            ) : (\n              \"\"\n            )}\n\n            <MuteBtn\n              muted={muted}\n              mute={() => this.setState({ muted: !muted })}\n            />\n          </div>\n\n          {movie.backdrop_path ? (\n            <img\n              style={{\n                opacity: img_loaded ? 1 : 0,\n                transition: \"0.7s all\",\n              }}\n              onLoad={() => this.handleImgeOnLoad()}\n              src={`${IMAGES_API_Q}/${movie.backdrop_path}`}\n              alt=\"\"\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n      </header>\n    );\n  }\n}\n\nexport default MoviePageAbout;\n"]},"metadata":{},"sourceType":"module"}