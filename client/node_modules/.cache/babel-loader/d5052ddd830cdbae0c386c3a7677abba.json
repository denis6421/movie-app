{"ast":null,"code":"import _classCallCheck from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import*as actions from\"../../../../actions/actions\";import Fade from\"react-reveal/Fade\";import ReactPlayer from\"react-player\";import{IMAGES_API_Q,VIDEO_API}from\"../../../../tools/keys\";import MuteBtn from\"../../../parts/MuteBtn\";import moment from\"moment\";import MobileTrailer from\"./MobileTrailer\";var MoviewPopupOverview=/*#__PURE__*/function(_Component){_inherits(MoviewPopupOverview,_Component);function MoviewPopupOverview(){var _this;_classCallCheck(this,MoviewPopupOverview);_this=_possibleConstructorReturn(this,_getPrototypeOf(MoviewPopupOverview).call(this));_this.hideVideo=function(){_this.setState({show_video:false});};_this.showVideo=function(){_this.setState({show_video:true});};_this.onLoad=function(){_this.setState({img_loaded:true});_this.props.getVideo();};_this.state={};return _this;}_createClass(MoviewPopupOverview,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var new_id=nextProps.selected_movie;var current_id=this.props.selected_movie;if(new_id!==current_id){this.setState({img_loaded:false,show_video:\"\",mobile_on:\"\"});}}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,movie=_this$props.movie,active=_this$props.active,video=_this$props.video,mobile=_this$props.mobile;console.log(mobile);var _this$state=this.state,img_loaded=_this$state.img_loaded,muted=_this$state.muted,show_video=_this$state.show_video,mobile_on=_this$state.mobile_on;return React.createElement(\"div\",{className:\"movie__popup__overview movie__popup__section\"},React.createElement(\"section\",{style:{opacity:active?0:1,pointerEvents:\"none\"},className:\"overlay\"}),React.createElement(\"div\",{className:\"movie__popup__overview__content\"},movie.id?React.createElement(Fade,{clear:true},React.createElement(\"h2\",null,movie.title),React.createElement(\"span\",{className:\"flex__start\"},React.createElement(\"h4\",null,moment(movie.release_date,\"YYYY-MM-DD\").format(\"YYYY\")),React.createElement(\"figure\",{className:\"movie__popup__overview__figure flex__start\"},movie.adult?\"Adult\":\"All ages\")),React.createElement(\"p\",null,movie.overview),React.createElement(\"span\",{className:\"flex__start\"},React.createElement(\"h4\",null,\"Rating\"),React.createElement(\"figure\",{className:\"flex__center movie__popup__overview__figure\"},\"\".concat(movie.vote_average?movie.vote_average.toFixed(1):\"0\")))):\"\"),!mobile?React.createElement(\"section\",{className:\"movie__popup__overview__bg\"},React.createElement(\"div\",{style:{opacity:show_video?1:0,transition:\"0.5s all\"},className:\"movie__popup__overview__video\"},!active&&!show_video?null:React.createElement(ReactPlayer,{muted:muted,onBufferEnd:this.showVideo,className:\"video\",url:\"\".concat(VIDEO_API).concat(video),playing:active?true:false,onEnded:this.hideVideo}),React.createElement(MuteBtn,{muted:muted,mute:function mute(){return _this2.setState({muted:!muted});}})),movie.backdrop_path?React.createElement(\"img\",{style:{opacity:img_loaded?1:0,transition:\"0.3s all\"},onLoad:function onLoad(){return _this2.onLoad();},src:\"\".concat(IMAGES_API_Q,\"/\").concat(movie.backdrop_path),alt:\"\"}):null):React.createElement(MobileTrailer,{onLoad:this.onLoad,video:video}));}}]);return MoviewPopupOverview;}(Component);function mapStateToProps(_ref){var global=_ref.global;return{global:global};}export default connect(mapStateToProps,actions)(MoviewPopupOverview);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviewPopupOverview.jsx"],"names":["React","Component","connect","actions","Fade","ReactPlayer","IMAGES_API_Q","VIDEO_API","MuteBtn","moment","MobileTrailer","MoviewPopupOverview","hideVideo","setState","show_video","showVideo","onLoad","img_loaded","props","getVideo","state","nextProps","new_id","selected_movie","current_id","mobile_on","movie","active","video","mobile","console","log","muted","opacity","pointerEvents","id","title","release_date","format","adult","overview","vote_average","toFixed","transition","backdrop_path","mapStateToProps","global"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport Fade from \"react-reveal/Fade\";\nimport ReactPlayer from \"react-player\";\nimport { IMAGES_API_Q, VIDEO_API } from \"../../../../tools/keys\";\nimport MuteBtn from \"../../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport MobileTrailer from \"./MobileTrailer\";\nclass MoviewPopupOverview extends Component {\n  constructor() {\n    super();\n\n    this.state = {};\n  }\n  hideVideo = () => {\n    this.setState({\n      show_video: false,\n    });\n  };\n\n  showVideo = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    let new_id = nextProps.selected_movie;\n    let current_id = this.props.selected_movie;\n    if (new_id !== current_id) {\n      this.setState({\n        img_loaded: false,\n        show_video: \"\",\n        mobile_on: \"\",\n      });\n    }\n  }\n  onLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n    this.props.getVideo();\n  };\n  render() {\n    const { movie, active, video, mobile } = this.props;\n    console.log(mobile);\n    const { img_loaded, muted, show_video, mobile_on } = this.state;\n    return (\n      <div className=\"movie__popup__overview movie__popup__section\">\n        <section\n          style={{\n            opacity: active ? 0 : 1,\n            pointerEvents: \"none\",\n          }}\n          className=\"overlay\"\n        ></section>\n        <div className=\"movie__popup__overview__content\">\n          {movie.id ? (\n            <Fade clear>\n              <h2>{movie.title}</h2>\n              <span className=\"flex__start\">\n                <h4>\n                  {moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")}\n                </h4>\n                <figure className=\"movie__popup__overview__figure flex__start\">\n                  {movie.adult ? \"Adult\" : \"All ages\"}\n                </figure>\n              \n              </span>\n              <p>{movie.overview}</p>\n              <span className=\"flex__start\">\n                <h4>Rating</h4>\n                <figure className=\"flex__center movie__popup__overview__figure\">{`${\n                  movie.vote_average ? movie.vote_average.toFixed(1) : \"0\"\n                }`}</figure>\n              </span>\n            </Fade>\n          ) : (\n            \"\"\n          )}\n        </div>\n\n        {!mobile ? (\n          <section className=\"movie__popup__overview__bg\">\n            <div\n              style={{\n                opacity: show_video ? 1 : 0,\n                transition: \"0.5s all\",\n              }}\n              className=\"movie__popup__overview__video\"\n            >\n              {!active && !show_video ? (\n              null\n              ) : (\n                <ReactPlayer\n                  muted={muted}\n                  onBufferEnd={this.showVideo}\n                  className=\"video\"\n                  url={`${VIDEO_API}${video}`}\n                  playing={active ? true : false}\n                  onEnded={this.hideVideo}\n                />\n              )}\n\n              <MuteBtn\n                muted={muted}\n                mute={() => this.setState({ muted: !muted })}\n              />\n            </div>\n\n            {movie.backdrop_path ? (\n              <img\n                style={{\n                  opacity: img_loaded ? 1 : 0,\n                  transition: \"0.3s all\",\n                }}\n                onLoad={() => this.onLoad()}\n                src={`${IMAGES_API_Q}/${movie.backdrop_path}`}\n                alt=\"\"\n              />\n            ) : (\n              null\n            )}\n          </section>\n        ) : (\n          <MobileTrailer \n          onLoad = {this.onLoad}\n          video={video} />\n        )}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ global }) {\n  return { global };\n}\n\nexport default connect(mapStateToProps, actions)(MoviewPopupOverview);\n"]},"metadata":{},"sourceType":"module"}