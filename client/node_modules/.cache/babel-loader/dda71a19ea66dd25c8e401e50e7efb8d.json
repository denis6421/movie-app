{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/movies-app/src/components/movies/Movie.jsx\";\nimport React, { Component } from \"react\";\nimport { IMAGES_API, VIDEO_API } from \"../../tools/keys\";\nimport { apiGetRequest } from \"../../api/api\";\nimport YouTube from \"react-youtube\";\nimport ReactPlayer from \"react-player\";\nimport MovieDetails from \"./parts/MovieDetails\";\nimport { Link, Element, Events, animateScroll as scroll, scrollSpy, scroller } from 'react-scroll';\n\nclass Movie extends Component {\n  constructor() {\n    super();\n\n    this.handleMouseEnter = async () => {\n      const timeout = setTimeout(async () => {\n        this.setState({\n          active: true,\n          z_index: 999999\n        });\n        await this.getMovieDetails();\n        this.getVideo();\n      }, 500);\n      this.setState({\n        timeout\n      });\n    };\n\n    this.getMovieDetails = async () => {\n      const movie = this.props.movie;\n      const api = \"movie/\".concat(movie.id);\n      await apiGetRequest(api).then(res => {\n        if (res) {\n          this.setState({\n            movie_details: res\n          });\n        }\n      });\n    };\n\n    this.handleMouseOut = () => {\n      window.clearTimeout(this.state.timeout);\n      this.setState({\n        active: false,\n        video: false,\n        show_video: false\n      });\n      setTimeout(() => {\n        this.setState({\n          z_index: 0\n        });\n      }, 100);\n    };\n\n    this.handleSelect = async ref => {\n      scroll.scrollTo(100);\n      setTimeout(() => {\n        this.props.handleMovieSelect();\n      }, 1000);\n    };\n\n    this.getVideo = async () => {\n      const video = this.state.video;\n      const movie = this.props.movie;\n      const api = \"movie/\".concat(movie.id, \"/videos\");\n\n      if (video) {\n        this.setState({\n          video\n        });\n      } else {\n        await apiGetRequest(api).then(res => {\n          this.setState({\n            video: res && res.results[0] ? res.results[0].key : \"\"\n          });\n        });\n      }\n    };\n\n    this.onReady = () => {\n      this.setState({\n        show_video: true\n      });\n    };\n\n    this.state = {};\n  }\n\n  render() {\n    const ref = React.createRef();\n    const movie = this.props.movie;\n    const _this$state = this.state,\n          active = _this$state.active,\n          z_index = _this$state.z_index,\n          video = _this$state.video,\n          show_video = _this$state.show_video,\n          movie_details = _this$state.movie_details;\n    const opts = {\n      playerVars: {\n        // https://developers.google.com/youtube/player_parameters\n        autoplay: video ? 1 : 0,\n        controls: 0\n      }\n    };\n    return React.createElement(\"div\", {\n      id: active ? \"movie__element--active\" : \"\",\n      name: \"test1\",\n      style: {\n        zIndex: z_index\n      },\n      onMouseEnter: () => this.handleMouseEnter(),\n      onMouseLeave: () => this.handleMouseOut(),\n      onClick: () => this.handleSelect(ref),\n      className: \"movie__element\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"aside\", {\n      className: \"movie__offset\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), video && active ? React.createElement(\"div\", {\n      id: show_video ? \"video__wrapper--active\" : \"\",\n      className: \"video__wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(ReactPlayer, {\n      onBufferEnd: this.onReady,\n      className: \"video\",\n      url: \"\".concat(VIDEO_API).concat(video),\n      playing: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })) : \"\", React.createElement(\"img\", {\n      style: {\n        opacity: show_video ? 0 : 1\n      },\n      src: \"\".concat(IMAGES_API, \"/\").concat(movie.poster_path),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), active ? React.createElement(MovieDetails, {\n      movie_details: movie_details,\n      movie: movie,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }) : '');\n  }\n\n}\n\nexport default Movie;","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/src/components/movies/Movie.jsx"],"names":["React","Component","IMAGES_API","VIDEO_API","apiGetRequest","YouTube","ReactPlayer","MovieDetails","Link","Element","Events","animateScroll","scroll","scrollSpy","scroller","Movie","constructor","handleMouseEnter","timeout","setTimeout","setState","active","z_index","getMovieDetails","getVideo","movie","props","api","id","then","res","movie_details","handleMouseOut","window","clearTimeout","state","video","show_video","handleSelect","ref","scrollTo","handleMovieSelect","results","key","onReady","render","createRef","opts","playerVars","autoplay","controls","zIndex","opacity","poster_path"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { IMAGES_API, VIDEO_API } from \"../../tools/keys\";\nimport { apiGetRequest } from \"../../api/api\";\nimport YouTube from \"react-youtube\";\nimport ReactPlayer from \"react-player\";\nimport MovieDetails from \"./parts/MovieDetails\";\n\nimport { Link, Element , Events, animateScroll as scroll, scrollSpy, scroller } from 'react-scroll'\n\nclass Movie extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  handleMouseEnter = async () => {\n    const timeout = setTimeout(async () => {\n      this.setState({\n        active: true,\n        z_index: 999999,\n      });\n     await this.getMovieDetails()\n     this.getVideo();\n    }, 500);\n    this.setState({\n      timeout,\n    });\n  };\n\n  getMovieDetails = async () => {\n      const {movie} = this.props\n    const api = `movie/${movie.id}`\n   await apiGetRequest(api).then(res => {\n        if(res){\n            this.setState({\n                movie_details:res\n            })\n        }\n   })\n  \n  }\n  handleMouseOut = () => {\n    window.clearTimeout(this.state.timeout);\n\n    this.setState({\n      active: false,\n      video: false,\n      show_video: false,\n    });\n\n    setTimeout(() => {\n      this.setState({\n        z_index: 0,\n      });\n    }, 100);\n  };\n  handleSelect = async (ref) => {\n    scroll.scrollTo(100);\n    setTimeout(() => {\n      this.props.handleMovieSelect();\n    }, 1000);\n  };\n\n  getVideo = async () => {\n    const { video } = this.state;\n    const { movie } = this.props;\n    const api = `movie/${movie.id}/videos`;\n    if (video) {\n      this.setState({\n        video,\n      });\n    } else {\n      await apiGetRequest(api).then((res) => {\n        this.setState({\n          video: res && res.results[0] ? res.results[0].key : \"\",\n        });\n      });\n    }\n  };\n  onReady = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n  render() {\n    const ref = React.createRef();\n    const { movie } = this.props;\n    const { active, z_index, video, show_video, movie_details } = this.state;\n\n    const opts = {\n      playerVars: {\n        // https://developers.google.com/youtube/player_parameters\n        autoplay: video ? 1 : 0,\n        controls: 0,\n      },\n    };\n    return (\n      <div\n        id={active ? \"movie__element--active\" : \"\"}\n        name=\"test1\"\n        style={{\n          zIndex: z_index,\n        }}\n        onMouseEnter={() => this.handleMouseEnter()}\n        onMouseLeave={() => this.handleMouseOut()}\n        onClick={() => this.handleSelect(ref)}\n        className=\"movie__element\"\n      >\n    \n        <aside \n       \n        className=\"movie__offset\"></aside>\n        {video && active ? (\n          <div\n            id={show_video ? \"video__wrapper--active\" : \"\"}\n            className=\"video__wrapper\"\n          >\n            <ReactPlayer\n              onBufferEnd={this.onReady}\n              className=\"video\"\n              url={`${VIDEO_API}${video}`}\n              playing\n            />\n          </div>\n        ) : (\n          \"\"\n        )}\n\n        <img\n          style={{\n            opacity: show_video ? 0 : 1,\n          }}\n          src={`${IMAGES_API}/${movie.poster_path}`}\n          alt=\"\"\n        />\n      {active  ?  <MovieDetails \n        movie_details = {movie_details}\n        movie = {movie}\n      /> : ''}\n      </div>\n    );\n  }\n}\n\nexport default Movie;\n"]},"metadata":{},"sourceType":"module"}