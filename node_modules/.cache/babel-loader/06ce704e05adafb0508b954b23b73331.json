{"ast":null,"code":"import _classCallCheck from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/denis/Desktop/projects/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import*as actions from\"../../../../actions/actions\";import Fade from\"react-reveal/Fade\";import ReactPlayer from\"react-player\";import{IMAGES_API_Q,VIDEO_API,IMAGES_API}from\"../../../../tools/keys\";import MuteBtn from\"../../../parts/MuteBtn\";import moment from\"moment\";import MobileTrailer from\"./MobileTrailer\";import ContentLoader from\"./ContentLoader\";import SmallLoader from\"../../../parts/SmallLoader\";var MoviewPopupOverview=/*#__PURE__*/function(_Component){_inherits(MoviewPopupOverview,_Component);function MoviewPopupOverview(){var _this;_classCallCheck(this,MoviewPopupOverview);_this=_possibleConstructorReturn(this,_getPrototypeOf(MoviewPopupOverview).call(this));_this.hideVideo=function(){_this.setState({show_video:false});};_this.showVideo=function(){_this.setState({show_video:true});};_this.onLoad=function(){_this.setState({img_loaded:true});_this.props.getVideo();};_this.state={};return _this;}_createClass(MoviewPopupOverview,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var new_id=nextProps.selected_movie;var current_id=this.props.selected_movie;if(new_id!==current_id){this.setState({img_loaded:false,show_video:\"\"});}}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,movie=_this$props.movie,active=_this$props.active,video=_this$props.video,mobile=_this$props.mobile;var _this$state=this.state,img_loaded=_this$state.img_loaded,muted=_this$state.muted,show_video=_this$state.show_video;return React.createElement(\"div\",{className:\"movie__popup__overview\"},React.createElement(\"section\",{style:{opacity:active?0:1,pointerEvents:\"none\"},className:\"overlay\"}),React.createElement(\"div\",{className:\"movie__popup__overview__content\"},movie.id?React.createElement(Fade,{duration:2000,clear:true},mobile?React.createElement(\"figure\",{className:\"popup__mobile__img\"},React.createElement(\"img\",{src:\"\".concat(IMAGES_API,\"/\").concat(movie.backdrop_path),alt:\"\"})):'',React.createElement(\"h2\",null,movie.title),React.createElement(\"span\",{className:\"flex__start\"},React.createElement(\"h4\",null,moment(movie.release_date,\"YYYY-MM-DD\").format(\"YYYY\")),React.createElement(\"figure\",{className:\"movie__popup__overview__figure flex__start\"},movie.adult?\"Adult\":\"All ages\")),React.createElement(\"p\",null,movie.overview),React.createElement(\"span\",{className:\"flex__start\"},React.createElement(\"h4\",null,\"Rating\"),React.createElement(\"figure\",{className:\"flex__center movie__popup__overview__figure\"},\"\".concat(movie.vote_average?movie.vote_average.toFixed(1):\"0\")))):React.createElement(ContentLoader,null)),!mobile?React.createElement(\"section\",{className:\"movie__popup__overview__bg\"},React.createElement(\"div\",{style:{opacity:show_video?1:0,transition:\"0.5s all\"},className:\"movie__popup__overview__video\"},!active&&!show_video?null:React.createElement(ReactPlayer,{muted:muted,onBufferEnd:this.showVideo,className:\"video\",url:\"\".concat(VIDEO_API).concat(video),playing:active?true:false,onEnded:this.hideVideo}),React.createElement(MuteBtn,{muted:muted,mute:function mute(){return _this2.setState({muted:!muted});}})),movie.backdrop_path?React.createElement(\"img\",{style:{opacity:img_loaded?1:0,transition:\"0.3s all\"},onLoad:function onLoad(){return _this2.onLoad();},src:\"\".concat(IMAGES_API_Q,\"/\").concat(movie.backdrop_path),alt:\"\"}):React.createElement(SmallLoader,null)):React.createElement(MobileTrailer,{onLoad:this.onLoad,video:video}));}}]);return MoviewPopupOverview;}(Component);function mapStateToProps(_ref){var global=_ref.global;return{global:global};}export default connect(mapStateToProps,actions)(MoviewPopupOverview);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviewPopupOverview.jsx"],"names":["React","Component","connect","actions","Fade","ReactPlayer","IMAGES_API_Q","VIDEO_API","IMAGES_API","MuteBtn","moment","MobileTrailer","ContentLoader","SmallLoader","MoviewPopupOverview","hideVideo","setState","show_video","showVideo","onLoad","img_loaded","props","getVideo","state","nextProps","new_id","selected_movie","current_id","movie","active","video","mobile","muted","opacity","pointerEvents","id","backdrop_path","title","release_date","format","adult","overview","vote_average","toFixed","transition","mapStateToProps","global"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport Fade from \"react-reveal/Fade\";\nimport ReactPlayer from \"react-player\";\nimport { IMAGES_API_Q, VIDEO_API , IMAGES_API} from \"../../../../tools/keys\";\nimport MuteBtn from \"../../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport MobileTrailer from \"./MobileTrailer\";\nimport ContentLoader from \"./ContentLoader\";\nimport SmallLoader from \"../../../parts/SmallLoader\";\nclass MoviewPopupOverview extends Component {\n  constructor() {\n    super();\n\n    this.state = {};\n  }\n  hideVideo = () => {\n    this.setState({\n      show_video: false,\n    });\n  };\n\n  showVideo = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    let new_id = nextProps.selected_movie;\n    let current_id = this.props.selected_movie;\n    if (new_id !== current_id) {\n      this.setState({\n        img_loaded: false,\n        show_video: \"\",\n     \n      });\n    }\n  }\n  onLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n    this.props.getVideo();\n  };\n  render() {\n    const { movie, active, video, mobile } = this.props;\n    const { img_loaded, muted, show_video } = this.state;\n    return (\n      <div className=\"movie__popup__overview\">\n        <section\n          style={{\n            opacity: active ? 0 : 1,\n            pointerEvents: \"none\",\n          }}\n          className=\"overlay\"\n        ></section>\n        <div className=\"movie__popup__overview__content\">\n          {movie.id ? (\n            <Fade \n            duration = {2000}\n            clear>\n              {\n                mobile ? \n                <figure className='popup__mobile__img'>\n                  <img  src={`${IMAGES_API}/${movie.backdrop_path}`} alt=\"\"/>\n                </figure>\n                :''\n              }\n              <h2>{movie.title}</h2>\n              <span className=\"flex__start\">\n                <h4>\n                  {moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")}\n                </h4>\n                <figure className=\"movie__popup__overview__figure flex__start\">\n                  {movie.adult ? \"Adult\" : \"All ages\"}\n                </figure>\n              \n              </span>\n              <p\n              >{movie.overview}</p>\n              <span className=\"flex__start\">\n                <h4>Rating</h4>\n                <figure className=\"flex__center movie__popup__overview__figure\">{`${\n                  movie.vote_average ? movie.vote_average.toFixed(1) : \"0\"\n                }`}</figure>\n              </span>\n            </Fade>\n          ) : (\n           <ContentLoader />\n          )}\n        </div>\n\n        {!mobile ? (\n          <section className=\"movie__popup__overview__bg\">\n            <div\n              style={{\n                opacity: show_video ? 1 : 0,\n                transition: \"0.5s all\",\n              }}\n              className=\"movie__popup__overview__video\"\n            >\n              {!active && !show_video ? (\n              null\n              ) : (\n                <ReactPlayer\n                  muted={muted}\n                  onBufferEnd={this.showVideo}\n                  className=\"video\"\n                  url={`${VIDEO_API}${video}`}\n                  playing={active ? true : false}\n                  onEnded={this.hideVideo}\n                />\n              )}\n\n              <MuteBtn\n                muted={muted}\n                mute={() => this.setState({ muted: !muted })}\n              />\n            </div>\n\n            {movie.backdrop_path ? (\n              <img\n                style={{\n                  opacity: img_loaded ? 1 : 0,\n                  transition: \"0.3s all\",\n                }}\n                onLoad={() => this.onLoad()}\n                src={`${IMAGES_API_Q}/${movie.backdrop_path}`}\n                alt=\"\"\n              />\n            ) : (\n             <SmallLoader />\n            )}\n          </section>\n        ) : (\n          <MobileTrailer \n          onLoad = {this.onLoad}\n          video={video} />\n        )}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ global }) {\n  return { global };\n}\n\nexport default connect(mapStateToProps, actions)(MoviewPopupOverview);\n"]},"metadata":{},"sourceType":"module"}