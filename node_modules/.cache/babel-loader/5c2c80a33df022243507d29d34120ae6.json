{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviePopup.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport { withRouter } from \"react-router-dom\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { apiGetRequest } from \"../../../../api/api\";\nimport MoviewPopupOverview from \"./MoviewPopupOverview\";\nimport MoviePopupDetails from \"./MoviePopupDetails\";\nimport MoviePopupRelated from \"./MoviePopupRelated\";\nconst buttons = [\"OVERVIEW\", \"RELATED\", \"DETAILS\"];\n\nclass MoviePopup extends Component {\n  constructor() {\n    super();\n\n    this.getData = async id => {\n      const mobile = this.props.mobile;\n      this.setState({\n        movie: {},\n        video: ''\n      });\n      await this.getMovie(id);\n\n      if (!mobile) {\n        this.getCredits(id);\n        this.getRelated(id);\n        this.setState({\n          section: \"OVERVIEW\"\n        });\n      }\n    };\n\n    this.getVideo = async id => {\n      const api = \"movie/\".concat(id, \"/videos\");\n      await apiGetRequest(api).then(res => {\n        setTimeout(() => {\n          this.setState({\n            video: res && res.results[0] ? res.results[0].key : \"\"\n          });\n        }, 400);\n      });\n    };\n\n    this.getMovie = async movie_id => {\n      const api = \"movie/\".concat(movie_id);\n      const res = await apiGetRequest(api);\n\n      if (res) {\n        this.setState({\n          movie: res\n        });\n      }\n    };\n\n    this.getRelated = async movie_id => {\n      const api = \"movie/\".concat(movie_id, \"/similar\");\n      const res = await apiGetRequest(api);\n\n      if (res) {\n        this.setState({\n          similar: res.results,\n          loaded: true\n        });\n      }\n    };\n\n    this.getCredits = async movie_id => {\n      const api = \"movie/\".concat(movie_id, \"/credits\");\n      const res = await apiGetRequest(api);\n\n      if (res) {\n        this.setState({\n          credits: res.cast,\n          loaded: true\n        });\n      }\n    };\n\n    this.close = () => {\n      this.setState({\n        loaded: false,\n        video: \"\"\n      });\n      setTimeout(() => {\n        this.props.closePreview();\n      }, 200);\n    };\n\n    this.changeSection = m => {\n      this.setState({\n        section: m\n      });\n    };\n\n    this.state = {\n      section: \"OVERVIEW\",\n      movie: {}\n    };\n  }\n\n  componentWillMount() {\n    const _this$props = this.props,\n          selected_movie = _this$props.selected_movie,\n          mobile = _this$props.mobile;\n    setTimeout(() => {\n      this.setState({\n        loaded: true\n      });\n    }, 20);\n    setTimeout(() => {\n      this.getData(selected_movie);\n      this.setState({\n        show_content: true\n      });\n    }, mobile ? 100 : 700);\n  }\n\n  async componentWillReceiveProps(nextProps) {\n    if (nextProps.selected_movie !== this.props.selected_movie) {\n      this.getData(nextProps.selected_movie);\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          loaded = _this$state.loaded,\n          section = _this$state.section,\n          movie = _this$state.movie,\n          credits = _this$state.credits,\n          similar = _this$state.similar,\n          video = _this$state.video,\n          show_content = _this$state.show_content;\n    const _this$props2 = this.props,\n          selected_movie = _this$props2.selected_movie,\n          size = _this$props2.size,\n          mobile = _this$props2.mobile;\n    return React.createElement(\"div\", {\n      id: loaded ? \"movie__popup--active\" : \"\",\n      className: \"movie__popup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, show_content ? React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      className: \"movie__popup__close\",\n      onClick: () => this.close(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(CloseIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })), React.createElement(MoviewPopupOverview, {\n      movie: movie,\n      video: video,\n      selected_movie: selected_movie,\n      active: section === \"OVERVIEW\",\n      getVideo: () => this.getVideo(selected_movie),\n      mobile: mobile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        opacity: section === \"OVERVIEW\" ? 0 : 1,\n        pointerEvents: section !== \"OVERVIEW\" ? \"all\" : \"none\"\n      },\n      className: \"movie__popup__sections\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"aside\", {\n      className: \"movie__popup__sections__shadow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, movie.title), section === \"DETAILS\" ? React.createElement(MoviePopupDetails, {\n      credits: credits,\n      movie: movie,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }) : section === \"RELATED\" ? React.createElement(MoviePopupRelated, {\n      size: size,\n      getData: this.getData,\n      similar: similar,\n      movie_id: selected_movie,\n      updateParent: this.props.updateParent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }) : ''), React.createElement(\"section\", {\n      className: \"movie__popup__actions flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, buttons && buttons.length > 0 ? buttons.map((m, i) => {\n      return React.createElement(\"button\", {\n        style: {\n          borderBottom: section === m ? \"5px solid red\" : \"\"\n        },\n        onClick: () => this.changeSection(m),\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, m);\n    }) : \"\")) : '');\n  }\n\n}\n\nfunction mapStateToProps({\n  global\n}) {\n  return {\n    global\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(MoviePopup));","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviePopup.jsx"],"names":["React","Component","connect","actions","withRouter","CloseIcon","apiGetRequest","MoviewPopupOverview","MoviePopupDetails","MoviePopupRelated","buttons","MoviePopup","constructor","getData","id","mobile","props","setState","movie","video","getMovie","getCredits","getRelated","section","getVideo","api","then","res","setTimeout","results","key","movie_id","similar","loaded","credits","cast","close","closePreview","changeSection","m","state","componentWillMount","selected_movie","show_content","componentWillReceiveProps","nextProps","render","size","opacity","pointerEvents","title","updateParent","length","map","i","borderBottom","mapStateToProps","global"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport { withRouter } from \"react-router-dom\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { apiGetRequest } from \"../../../../api/api\";\nimport MoviewPopupOverview from \"./MoviewPopupOverview\";\nimport MoviePopupDetails from \"./MoviePopupDetails\";\nimport MoviePopupRelated from \"./MoviePopupRelated\";\n\nconst buttons = [\"OVERVIEW\", \"RELATED\", \"DETAILS\"];\nclass MoviePopup extends Component {\n  constructor() {\n    super();\n    this.state = {\n      section: \"OVERVIEW\",\n      movie: {},\n    };\n  }\n\n  componentWillMount() {\n    const { selected_movie, mobile } = this.props;\n    setTimeout(() => {\n      this.setState({\n        loaded: true,\n      });\n    }, 20);\n    setTimeout(() => {\n      this.getData(selected_movie);\n      this.setState({\n        show_content:true\n      })\n    },mobile ? 100  :  700);\n  }\n\n  async componentWillReceiveProps(nextProps) {\n    if (nextProps.selected_movie !== this.props.selected_movie) {\n      this.getData(nextProps.selected_movie);\n    }\n   \n  }\n\n  getData = async (id) => {\n    const {mobile} = this.props\n    this.setState({\n      movie:{},\n      video:''\n    })\n    await this.getMovie(id);\n   if(!mobile){\n    this.getCredits(id);\n    this.getRelated(id);\n      this.setState({\n        section: \"OVERVIEW\",\n      });\n   }\n  };\n  getVideo = async (id) => {\n      const api = `movie/${id}/videos`;\n      await apiGetRequest(api).then((res) => {\n       setTimeout(() => {\n        this.setState({\n          video: res && res.results[0] ? res.results[0].key : \"\",\n        });\n       }, 400);\n      });\n   \n\n  };\n\n  getMovie = async (movie_id) => {\n    const api = `movie/${movie_id}`;\n    const res = await apiGetRequest(api);\n    if (res) {\n      this.setState({\n        movie: res,\n      });\n    }\n  };\n  getRelated = async (movie_id) => {\n    const api = `movie/${movie_id}/similar`;\n    const res = await apiGetRequest(api);\n    if (res) {\n      this.setState({\n        similar: res.results,\n        loaded: true,\n      });\n    }\n  };\n\n  getCredits = async (movie_id) => {\n    const api = `movie/${movie_id}/credits`;\n    const res = await apiGetRequest(api);\n    if (res) {\n      this.setState({\n        credits: res.cast,\n        loaded: true,\n      });\n    }\n  };\n  close = () => {\n    this.setState({\n      loaded: false,\n      video: \"\",\n      \n    });\n    setTimeout(() => {\n      this.props.closePreview();\n    }, 200);\n  };\n\n  changeSection = (m) => {\n    this.setState({\n      section: m,\n    });\n  };\n  render() {\n    const { loaded, section, movie, credits, similar, video, show_content } = this.state;\n    const { selected_movie , size, mobile} = this.props;\n\n    return (\n      <div id={loaded ? \"movie__popup--active\" : \"\"} className=\"movie__popup\">\n      {show_content ?  <>\n       <button className=\"movie__popup__close\" onClick={() => this.close()}>\n          <CloseIcon />\n        </button>\n\n        <MoviewPopupOverview\n          movie={movie}\n          video = {video}\n          selected_movie = {selected_movie}\n          active={section === \"OVERVIEW\"}\n          getVideo = {() => this.getVideo(selected_movie)}\n          mobile = {mobile}\n        />\n        <div\n          style={{\n            opacity: section === \"OVERVIEW\" ? 0 : 1,\n            pointerEvents: section !== \"OVERVIEW\" ? \"all\" : \"none\",\n          }}\n          className=\"movie__popup__sections\"\n        >\n          <aside className=\"movie__popup__sections__shadow\"></aside>\n          <header>{movie.title}</header>\n          {section === \"DETAILS\" ? (\n            <MoviePopupDetails \n           \n            credits={credits} movie={movie} />\n          ) : section === \"RELATED\" ? (\n            <MoviePopupRelated\n            size = {size}\n              getData={this.getData}\n              similar={similar}\n              movie_id={selected_movie}\n              updateParent={this.props.updateParent}\n            />\n          ) : ''}\n        </div>\n        <section className=\"movie__popup__actions flex__start\">\n          {buttons && buttons.length > 0\n            ? buttons.map((m, i) => {\n                return (\n                  <button\n                    style={{\n                      borderBottom: section === m ? \"5px solid red\" : \"\",\n                    }}\n                    onClick={() => this.changeSection(m)}\n                    key={i}\n                  >\n                    {m}\n                  </button>\n                );\n              })\n            : \"\"}\n        </section>\n       </> : ''}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ global }) {\n  return { global };\n}\n\nexport default withRouter(connect(mapStateToProps, actions)(MoviePopup));\n"]},"metadata":{},"sourceType":"module"}