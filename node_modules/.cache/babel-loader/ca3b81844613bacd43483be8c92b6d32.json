{"ast":null,"code":"var _jsxFileName = \"/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviewPopupOverview.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport Fade from \"react-reveal/Fade\";\nimport ReactPlayer from \"react-player\";\nimport { IMAGES_API_Q, VIDEO_API, IMAGES_API } from \"../../../../tools/keys\";\nimport MuteBtn from \"../../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport MobileTrailer from \"./MobileTrailer\";\nimport ContentLoader from \"./ContentLoader\";\nimport SmallLoader from \"../../../parts/SmallLoader\";\n\nclass MoviewPopupOverview extends Component {\n  constructor() {\n    super();\n\n    this.hideVideo = () => {\n      this.setState({\n        show_video: false\n      });\n    };\n\n    this.showVideo = () => {\n      this.setState({\n        show_video: true\n      });\n    };\n\n    this.onLoad = () => {\n      this.setState({\n        img_loaded: true\n      });\n      this.props.getVideo();\n    };\n\n    this.state = {};\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let new_id = nextProps.selected_movie;\n    let current_id = this.props.selected_movie;\n\n    if (new_id !== current_id) {\n      this.setState({\n        img_loaded: false,\n        show_video: \"\"\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          movie = _this$props.movie,\n          active = _this$props.active,\n          video = _this$props.video,\n          mobile = _this$props.mobile;\n    const _this$state = this.state,\n          img_loaded = _this$state.img_loaded,\n          muted = _this$state.muted,\n          show_video = _this$state.show_video;\n    return React.createElement(\"div\", {\n      className: \"movie__popup__overview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      style: {\n        opacity: active ? 0 : 1,\n        pointerEvents: \"none\"\n      },\n      className: \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"movie__popup__overview__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, movie.id ? React.createElement(Fade, {\n      duration: 2000,\n      clear: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, mobile ? React.createElement(\"figure\", {\n      className: \"popup__mobile__img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"\".concat(IMAGES_API, \"/\").concat(movie.backdrop_path),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })) : '', React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, movie.title), React.createElement(\"span\", {\n      className: \"flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")), React.createElement(\"figure\", {\n      className: \"movie__popup__overview__figure flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, movie.adult ? \"Adult\" : \"All ages\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, movie.overview), React.createElement(\"span\", {\n      className: \"flex__start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Rating\"), React.createElement(\"figure\", {\n      className: \"flex__center movie__popup__overview__figure\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"\".concat(movie.vote_average ? movie.vote_average.toFixed(1) : \"0\")))) : React.createElement(ContentLoader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    })), !mobile ? React.createElement(\"section\", {\n      className: \"movie__popup__overview__bg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        opacity: show_video ? 1 : 0,\n        transition: \"0.5s all\"\n      },\n      className: \"movie__popup__overview__video\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, !active && !show_video ? null : React.createElement(ReactPlayer, {\n      muted: muted,\n      onBufferEnd: this.showVideo,\n      className: \"video\",\n      url: \"\".concat(VIDEO_API).concat(video),\n      playing: active ? true : false,\n      onEnded: this.hideVideo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(MuteBtn, {\n      muted: muted,\n      mute: () => this.setState({\n        muted: !muted\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })), movie.backdrop_path ? React.createElement(\"img\", {\n      style: {\n        opacity: img_loaded ? 1 : 0,\n        transition: \"0.3s all\"\n      },\n      onLoad: () => this.onLoad(),\n      src: \"\".concat(IMAGES_API_Q, \"/\").concat(movie.backdrop_path),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }) : React.createElement(SmallLoader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    })) : React.createElement(MobileTrailer, {\n      onLoad: this.onLoad,\n      video: video,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction mapStateToProps({\n  global\n}) {\n  return {\n    global\n  };\n}\n\nexport default connect(mapStateToProps, actions)(MoviewPopupOverview);","map":{"version":3,"sources":["/Users/denis/Desktop/projects/movies-app/client/src/components/movies/parts/movie-preview/MoviewPopupOverview.jsx"],"names":["React","Component","connect","actions","Fade","ReactPlayer","IMAGES_API_Q","VIDEO_API","IMAGES_API","MuteBtn","moment","MobileTrailer","ContentLoader","SmallLoader","MoviewPopupOverview","constructor","hideVideo","setState","show_video","showVideo","onLoad","img_loaded","props","getVideo","state","componentWillReceiveProps","nextProps","new_id","selected_movie","current_id","render","movie","active","video","mobile","muted","opacity","pointerEvents","id","backdrop_path","title","release_date","format","adult","overview","vote_average","toFixed","transition","mapStateToProps","global"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,6BAAzB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAmCC,UAAnC,QAAoD,wBAApD;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;;AACA,MAAMC,mBAAN,SAAkCb,SAAlC,CAA4C;AAC1Cc,EAAAA,WAAW,GAAG;AACZ;;AADY,SAKdC,SALc,GAKF,MAAM;AAChB,WAAKC,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KATa;;AAAA,SAWdC,SAXc,GAWF,MAAM;AAChB,WAAKF,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KAfa;;AAAA,SA4BdE,MA5Bc,GA4BL,MAAM;AACb,WAAKH,QAAL,CAAc;AACZI,QAAAA,UAAU,EAAE;AADA,OAAd;AAGA,WAAKC,KAAL,CAAWC,QAAX;AACD,KAjCa;;AAGZ,SAAKC,KAAL,GAAa,EAAb;AACD;;AAaDC,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACnC,QAAIC,MAAM,GAAGD,SAAS,CAACE,cAAvB;AACA,QAAIC,UAAU,GAAG,KAAKP,KAAL,CAAWM,cAA5B;;AACA,QAAID,MAAM,KAAKE,UAAf,EAA2B;AACzB,WAAKZ,QAAL,CAAc;AACZI,QAAAA,UAAU,EAAE,KADA;AAEZH,QAAAA,UAAU,EAAE;AAFA,OAAd;AAKD;AACF;;AAODY,EAAAA,MAAM,GAAG;AAAA,wBACkC,KAAKR,KADvC;AAAA,UACCS,KADD,eACCA,KADD;AAAA,UACQC,MADR,eACQA,MADR;AAAA,UACgBC,KADhB,eACgBA,KADhB;AAAA,UACuBC,MADvB,eACuBA,MADvB;AAAA,wBAEmC,KAAKV,KAFxC;AAAA,UAECH,UAFD,eAECA,UAFD;AAAA,UAEac,KAFb,eAEaA,KAFb;AAAA,UAEoBjB,UAFpB,eAEoBA,UAFpB;AAGP,WACE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAE;AACLkB,QAAAA,OAAO,EAAEJ,MAAM,GAAG,CAAH,GAAO,CADjB;AAELK,QAAAA,aAAa,EAAE;AAFV,OADT;AAKE,MAAA,SAAS,EAAC,SALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAK,MAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGN,KAAK,CAACO,EAAN,GACC,oBAAC,IAAD;AACA,MAAA,QAAQ,EAAI,IADZ;AAEA,MAAA,KAAK,MAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIIJ,MAAM,GACN;AAAQ,MAAA,SAAS,EAAC,oBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,GAAG,YAAK1B,UAAL,cAAmBuB,KAAK,CAACQ,aAAzB,CAAT;AAAmD,MAAA,GAAG,EAAC,EAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADM,GAIL,EARL,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKR,KAAK,CAACS,KAAX,CAVF,EAWE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG9B,MAAM,CAACqB,KAAK,CAACU,YAAP,EAAqB,YAArB,CAAN,CAAyCC,MAAzC,CAAgD,MAAhD,CADH,CADF,EAIE;AAAQ,MAAA,SAAS,EAAC,4CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGX,KAAK,CAACY,KAAN,GAAc,OAAd,GAAwB,UAD3B,CAJF,CAXF,EAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACEZ,KAAK,CAACa,QADR,CApBF,EAsBE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAQ,MAAA,SAAS,EAAC,6CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACEb,KAAK,CAACc,YAAN,GAAqBd,KAAK,CAACc,YAAN,CAAmBC,OAAnB,CAA2B,CAA3B,CAArB,GAAqD,GADvD,EAFF,CAtBF,CADD,GA+BA,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhCH,CARF,EA4CG,CAACZ,MAAD,GACC;AAAS,MAAA,SAAS,EAAC,4BAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAE;AACLE,QAAAA,OAAO,EAAElB,UAAU,GAAG,CAAH,GAAO,CADrB;AAEL6B,QAAAA,UAAU,EAAE;AAFP,OADT;AAKE,MAAA,SAAS,EAAC,+BALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOG,CAACf,MAAD,IAAW,CAACd,UAAZ,GACD,IADC,GAGC,oBAAC,WAAD;AACE,MAAA,KAAK,EAAEiB,KADT;AAEE,MAAA,WAAW,EAAE,KAAKhB,SAFpB;AAGE,MAAA,SAAS,EAAC,OAHZ;AAIE,MAAA,GAAG,YAAKZ,SAAL,SAAiB0B,KAAjB,CAJL;AAKE,MAAA,OAAO,EAAED,MAAM,GAAG,IAAH,GAAU,KAL3B;AAME,MAAA,OAAO,EAAE,KAAKhB,SANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAoBE,oBAAC,OAAD;AACE,MAAA,KAAK,EAAEmB,KADT;AAEE,MAAA,IAAI,EAAE,MAAM,KAAKlB,QAAL,CAAc;AAAEkB,QAAAA,KAAK,EAAE,CAACA;AAAV,OAAd,CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,CADF,EA2BGJ,KAAK,CAACQ,aAAN,GACC;AACE,MAAA,KAAK,EAAE;AACLH,QAAAA,OAAO,EAAEf,UAAU,GAAG,CAAH,GAAO,CADrB;AAEL0B,QAAAA,UAAU,EAAE;AAFP,OADT;AAKE,MAAA,MAAM,EAAE,MAAM,KAAK3B,MAAL,EALhB;AAME,MAAA,GAAG,YAAKd,YAAL,cAAqByB,KAAK,CAACQ,aAA3B,CANL;AAOE,MAAA,GAAG,EAAC,EAPN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAWA,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtCH,CADD,GA2CC,oBAAC,aAAD;AACA,MAAA,MAAM,EAAI,KAAKnB,MADf;AAEA,MAAA,KAAK,EAAEa,KAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvFJ,CADF;AA8FD;;AApIyC;;AAuI5C,SAASe,eAAT,CAAyB;AAAEC,EAAAA;AAAF,CAAzB,EAAqC;AACnC,SAAO;AAAEA,IAAAA;AAAF,GAAP;AACD;;AAED,eAAe/C,OAAO,CAAC8C,eAAD,EAAkB7C,OAAlB,CAAP,CAAkCW,mBAAlC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../../actions/actions\";\nimport Fade from \"react-reveal/Fade\";\nimport ReactPlayer from \"react-player\";\nimport { IMAGES_API_Q, VIDEO_API , IMAGES_API} from \"../../../../tools/keys\";\nimport MuteBtn from \"../../../parts/MuteBtn\";\nimport moment from \"moment\";\nimport MobileTrailer from \"./MobileTrailer\";\nimport ContentLoader from \"./ContentLoader\";\nimport SmallLoader from \"../../../parts/SmallLoader\";\nclass MoviewPopupOverview extends Component {\n  constructor() {\n    super();\n\n    this.state = {};\n  }\n  hideVideo = () => {\n    this.setState({\n      show_video: false,\n    });\n  };\n\n  showVideo = () => {\n    this.setState({\n      show_video: true,\n    });\n  };\n\n  componentWillReceiveProps(nextProps) {\n    let new_id = nextProps.selected_movie;\n    let current_id = this.props.selected_movie;\n    if (new_id !== current_id) {\n      this.setState({\n        img_loaded: false,\n        show_video: \"\",\n     \n      });\n    }\n  }\n  onLoad = () => {\n    this.setState({\n      img_loaded: true,\n    });\n    this.props.getVideo();\n  };\n  render() {\n    const { movie, active, video, mobile } = this.props;\n    const { img_loaded, muted, show_video } = this.state;\n    return (\n      <div className=\"movie__popup__overview\">\n        <section\n          style={{\n            opacity: active ? 0 : 1,\n            pointerEvents: \"none\",\n          }}\n          className=\"overlay\"\n        ></section>\n        <div className=\"movie__popup__overview__content\">\n          {movie.id ? (\n            <Fade \n            duration = {2000}\n            clear>\n              {\n                mobile ? \n                <figure className='popup__mobile__img'>\n                  <img  src={`${IMAGES_API}/${movie.backdrop_path}`} alt=\"\"/>\n                </figure>\n                :''\n              }\n              <h2>{movie.title}</h2>\n              <span className=\"flex__start\">\n                <h4>\n                  {moment(movie.release_date, \"YYYY-MM-DD\").format(\"YYYY\")}\n                </h4>\n                <figure className=\"movie__popup__overview__figure flex__start\">\n                  {movie.adult ? \"Adult\" : \"All ages\"}\n                </figure>\n              \n              </span>\n              <p\n              >{movie.overview}</p>\n              <span className=\"flex__start\">\n                <h4>Rating</h4>\n                <figure className=\"flex__center movie__popup__overview__figure\">{`${\n                  movie.vote_average ? movie.vote_average.toFixed(1) : \"0\"\n                }`}</figure>\n              </span>\n            </Fade>\n          ) : (\n           <ContentLoader />\n          )}\n        </div>\n\n        {!mobile ? (\n          <section className=\"movie__popup__overview__bg\">\n            <div\n              style={{\n                opacity: show_video ? 1 : 0,\n                transition: \"0.5s all\",\n              }}\n              className=\"movie__popup__overview__video\"\n            >\n              {!active && !show_video ? (\n              null\n              ) : (\n                <ReactPlayer\n                  muted={muted}\n                  onBufferEnd={this.showVideo}\n                  className=\"video\"\n                  url={`${VIDEO_API}${video}`}\n                  playing={active ? true : false}\n                  onEnded={this.hideVideo}\n                />\n              )}\n\n              <MuteBtn\n                muted={muted}\n                mute={() => this.setState({ muted: !muted })}\n              />\n            </div>\n\n            {movie.backdrop_path ? (\n              <img\n                style={{\n                  opacity: img_loaded ? 1 : 0,\n                  transition: \"0.3s all\",\n                }}\n                onLoad={() => this.onLoad()}\n                src={`${IMAGES_API_Q}/${movie.backdrop_path}`}\n                alt=\"\"\n              />\n            ) : (\n             <SmallLoader />\n            )}\n          </section>\n        ) : (\n          <MobileTrailer \n          onLoad = {this.onLoad}\n          video={video} />\n        )}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ global }) {\n  return { global };\n}\n\nexport default connect(mapStateToProps, actions)(MoviewPopupOverview);\n"]},"metadata":{},"sourceType":"module"}